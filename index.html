
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      <link rel="icon" href="images/leaf.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.6">
    
    
      
        <title>HORTUS</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.ded33207.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="light-green">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tool-to-generate-forest-garden-designs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="HORTUS" class="md-header__button md-logo" aria-label="HORTUS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 8C8 10 5.9 16.17 3.82 21.34l1.89.66.95-2.3c.48.17.98.3 1.34.3C19 20 22 3 22 3c-1 2-8 2.25-13 3.25S2 11.5 2 13.5s1.75 3.75 1.75 3.75C7 8 17 8 17 8Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HORTUS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="HORTUS" class="md-nav__button md-logo" aria-label="HORTUS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 8C8 10 5.9 16.17 3.82 21.34l1.89.66.95-2.3c.48.17.98.3 1.34.3C19 20 22 3 22 3c-1 2-8 2.25-13 3.25S2 11.5 2 13.5s1.75 3.75 1.75 3.75C7 8 17 8 17 8Z"/></svg>

    </a>
    HORTUS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Home
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tech-stack" class="md-nav__link">
    Tech stack:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    Development
  </a>
  
    <nav class="md-nav" aria-label="Development">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sketch" class="md-nav__link">
    Sketch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-1" class="md-nav__link">
    Phase 1:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2" class="md-nav__link">
    Phase 2:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3" class="md-nav__link">
    Phase 3:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4" class="md-nav__link">
    Phase 4:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-5" class="md-nav__link">
    Phase 5:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future" class="md-nav__link">
    Future
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mscw" class="md-nav__link">
    MSCW
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-generation-notes" class="md-nav__link">
    Image generation notes
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="plant-info.md" class="md-nav__link">
        Plant Information
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="design-stages.md" class="md-nav__link">
        Design Stages
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Blog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="blog/fff.md" class="md-nav__link">
        Food, Forests & Freedom
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="blog/rrr.md" class="md-nav__link">
        Robots, Reactors & Rockets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="blog/zerowaste.md" class="md-nav__link">
        Zero Waste
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="blog/vegan.md" class="md-nav__link">
        Vegan
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tech-stack" class="md-nav__link">
    Tech stack:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    Development
  </a>
  
    <nav class="md-nav" aria-label="Development">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sketch" class="md-nav__link">
    Sketch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-1" class="md-nav__link">
    Phase 1:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2" class="md-nav__link">
    Phase 2:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3" class="md-nav__link">
    Phase 3:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4" class="md-nav__link">
    Phase 4:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-5" class="md-nav__link">
    Phase 5:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future" class="md-nav__link">
    Future
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mscw" class="md-nav__link">
    MSCW
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-generation-notes" class="md-nav__link">
    Image generation notes
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<p>Maybe instead of web app and all this, use zig + tinyvg and create a cli app. The image can be made into png and opened. <code>hortus -w 30 -l 50</code></p>
<p>Then web app can be whatever and just pass URL params to shell call.</p>
<p>Dont know how to handle the plant info. Maybe just flat file? JSON? DB access wouldnt be available easily.</p>
<p>At worst, the zig app could pregenerate all the combinations of images and store them for a web app to serve.</p>
<h1 id="tool-to-generate-forest-garden-designs">Tool to generate forest garden designs<a class="headerlink" href="#tool-to-generate-forest-garden-designs" title="Permanent link">&para;</a></h1>
<p>Desired end goal is to have a web app which lets you select certain parameters, then when you click generate, it returns the layout for a forest garden according to your parameters.</p>
<p>To start off with it will just be the API backend and a HTTP client as the frontend.</p>
<p>Send HTTP POST to URL, it returns a Forest Garden layout
Maybe just coordinates and data to start with, not an actual image</p>
<h2 id="tech-stack">Tech stack:<a class="headerlink" href="#tech-stack" title="Permanent link">&para;</a></h2>
<ul>
<li>Frontend: <ul>
<li>generated from backend</li>
</ul>
</li>
<li>Backend:<ul>
<li>FastAPI</li>
<li>SQLModel</li>
<li>Arq + Redis</li>
</ul>
</li>
<li>Database:<ul>
<li>Postgresql</li>
</ul>
</li>
</ul>
<h2 id="development">Development<a class="headerlink" href="#development" title="Permanent link">&para;</a></h2>
<h3 id="sketch">Sketch<a class="headerlink" href="#sketch" title="Permanent link">&para;</a></h3>
<ul>
<li>Write short document explaining what the app is and what it does</li>
<li>Create initial wireframes for pages<ul>
<li>The main content should be at the center of the page so it has most focus</li>
</ul>
</li>
</ul>
<h3 id="phase-1">Phase 1:<a class="headerlink" href="#phase-1" title="Permanent link">&para;</a></h3>
<ul>
<li>Project bootstrapping<ul>
<li>Documentation generation</li>
<li>Initial Hello world code</li>
<li>Config/settings file</li>
<li>Able to deploy for testing</li>
<li>Able to generate a basic image</li>
</ul>
</li>
</ul>
<h3 id="phase-2">Phase 2:<a class="headerlink" href="#phase-2" title="Permanent link">&para;</a></h3>
<ul>
<li>Can send/receive HTTP requests to HTTP server</li>
<li>HTTP server can return test data from app</li>
<li>Simple processing of the data</li>
</ul>
<p>2 separate areas:</p>
<ul>
<li>image generation<ul>
<li>algos to determine plant locations</li>
<li>retrieve plant information</li>
</ul>
</li>
<li>which image to get, based on info from client</li>
</ul>
<p>focus on image generation first</p>
<p>does the plant data even need to be in a database?
probably should when there are lots of plants</p>
<p>can generate SVG with pycairo. Dont need to convert to PNG, SVG is more efficient
you have to move around manually. Might need to do the image in layers, like trees first, then shrubs, and keep working around until all done.</p>
<p>jinja2 for templating? https://fastapi.tiangolo.com/advanced/templates/
 use NGINX cache to cache the generated SVG files (compress/minify them first anyway) https://docs.nginx.com/nginx/admin-guide/content-cache/content-caching/</p>
<h3 id="phase-3">Phase 3:<a class="headerlink" href="#phase-3" title="Permanent link">&para;</a></h3>
<ul>
<li>Able to connect to database</li>
<li>Database schema migrations and SQL generation</li>
<li>HTTP server can connect to database and return test data</li>
<li>Working API backend which when sending a request with a HTTP client, returns a JSON response which describes a basic garden layout and plant attributes.</li>
<li>Backend can determine basic relationships between plants from test data</li>
</ul>
<h3 id="phase-4">Phase 4:<a class="headerlink" href="#phase-4" title="Permanent link">&para;</a></h3>
<ul>
<li>More sophisticated methods for determining relationships between plants from test data</li>
</ul>
<h3 id="phase-5">Phase 5:<a class="headerlink" href="#phase-5" title="Permanent link">&para;</a></h3>
<ul>
<li>API backend returns generated basic images instead of JSON data</li>
</ul>
<h3 id="future">Future<a class="headerlink" href="#future" title="Permanent link">&para;</a></h3>
<ul>
<li>Range slider which displays the growth over time of the forest garden</li>
<li>Expand to larger land area</li>
<li>Expand variety of plants</li>
<li>Different geographic regions than just UK</li>
</ul>
<h2 id="notes">Notes<a class="headerlink" href="#notes" title="Permanent link">&para;</a></h2>
<p>Write the documentation and text on the website from a gardeners perspective, not an IT one. Someone wanting a garden layout doesnt care that its written in X programming language using X framework.</p>
<ul>
<li>Deployment to server running NGINX Unit. SCP new binary to server. Ping Unit to load new app.</li>
<li>Look into how to generate SVG images<ul>
<li>SVG are text. If we minify and compress them, could we serve them direct from a HTTP cache in front rather than storing them in object storage.</li>
</ul>
</li>
<li>Think about design of the frontend, how will it look? Buttons and sliders then click submit?<ul>
<li>How to handle scale? Need to set max limit on size otherwise it wont fit on screen and take loads of CPU time.</li>
<li>Maybe set reasonable limits and just say if you need bigger then run it multiple times and join them up yourself.</li>
<li>Maybe use standard colours to denote canopy layer, climbers, perrenials etc. Then have a text output which has a key and explains what specific plants are used.</li>
</ul>
</li>
<li>Rate limiting, caching etc.</li>
<li>If you want to show changes over time, you'd need to generate a long series of images, or a GIF/video. So you may want to cache requests and already generated images when they have been generated before. Then maybe have an option to generate a new image which bypasses the cache.</li>
<li>Lots of variables to consider<ul>
<li>Initial input parameters</li>
<li>Light, wind, water</li>
<li>Plants relationships to one another</li>
<li>geographic location - will determine sun location, average temperature, hardiness zones</li>
</ul>
</li>
</ul>
<h2 id="mscw">MSCW<a class="headerlink" href="#mscw" title="Permanent link">&para;</a></h2>
<ul>
<li>field inputs to change grid, like size or zone/climate type</li>
<li>show time periods to show different timelines of the plants. First planted / X years / X decades. Trees will outlive most plants. Perrenials last longer than biennial etc.</li>
<li>need a DB containing the different plants/trees and weighting for different plants.</li>
<li>draw walls and ponds/lakes/water feature. Some plants like walls/shade. Some plants are aquatic.</li>
<li>needs to be layered. Trees take up lots of space higher up, not so much at the base of the trunk. May also need to show underground, as some plants have tubers or other specific root structures.</li>
<li>Square grid. Use regular shapes (just squares/rectangles?) to show plant location and area taken up.</li>
<li>Application is responsible for generating the grid locations for each plant, then its up to the frontend to decide how to display it.</li>
<li>Maybe instead of layers it could be 3 separate images, one for each layer. Then they could be side-by-side. Or overlaid, depends on the frontend.</li>
<li>Label the circles underneath with an ID number, then have a key at the side that says the plant name and a link to a page which describes all aspects about that plant.</li>
<li>Wont do - Seaweed app like vertical ocean farming. This can be done later or as a second app.</li>
</ul>
<h2 id="image-generation-notes">Image generation notes<a class="headerlink" href="#image-generation-notes" title="Permanent link">&para;</a></h2>
<p>Take pycairo context object and pass to other functions. They individually apply their changes to the context in turn for the different things, so its like applying layers to the picture. Iterate over canopy layer, shrub layer etc.</p>
<p>Then the final result can be the returned context.</p>
<p>The order of the drawing is important. Later drawings appear on top of earlier drawings</p>
<p>Can draw lines for borders of plants, but what about symbols for denoting trees and plants? 
Circles and rectangles? different colours? Tree wavy line shape?
Maybe basic initially to get the placements correct, then have prebuilt SVG bits for tree shapes? Use fractals or spirals or something to generate them?
I need this to look professional.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant"], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>